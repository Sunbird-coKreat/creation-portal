<div *ngIf="!showLoader && !showError && currentStage === 'collectionComponent'">
  <div class="sb-bg-color-primary-0 practical-header py-20">
    <div class="d-flex flex-jc-space-between practical-header__content ui container py-10">
      <div class="practical-header__title flex-basis-1">
        <h5 class="m-0 p-0 font-weight-bold d-inline-block">{{programContext.name}} </h5>
        <ng-template #popupTemplate>
          <div class="content">
            <div class="textbook-details ml-8">
              <div class="header"><strong>{{ resourceService.frmelmnts.lbl.subjects }}</strong></div>
              <div class="content">
                <label class="d-block fsmall font-weight-normal mb-0">{{sharedContext.subject.join(', ')}}</label>
              </div>
              <hr />
              <div class="header"><strong>{{ resourceService.frmelmnts.lbl.grades }}</strong></div>
              <div class="content">
                <label class="d-block fsmall font-weight-normal mb-0">{{sharedContext.gradeLevel.join(', ')}}</label>
              </div>
            </div>
          </div>
        </ng-template>
        <i class="info circle link icon" suiPopup [popupTemplate]="popupTemplate">
        </i>

        <p class="fs-0-785 font-weight-normal">{{programContext.description}}</p>
      </div>

      <div class="sb-meta-data-container sb-meta-data-column px-10 w-20">
        <label class="m-0">{{ resourceService.frmelmnts.lbl.contentType}}</label>
        <p class="sb__ellipsis sb__ellipsis--one cursor-pointer" 
        suiPopup popupHeader="{{resourceService.frmelmnts.lbl.contentType}}" 
        popupText="{{programContext?.content_types?.join(', ')}}">
          <span>
            {{programContext?.content_types?.join(', ')}}
          </span>
        </p>
      </div>

      <ng-container *ngIf="programContext">
        <div class="program-timeline px-16">
          <div class="program-timeline-item">
            <div class="status" [class.active]="activeDate === 'nomination_enddate'">
              <div class="status__label">{{resourceService.frmelmnts.lbl.nominationEndDate}}</div>
              <div class="status__date">
                {{ programContext?.nomination_enddate |  date:'LLLL d, yyyy'  }}
                <br />
                <em [class.sb-color-warning]="activeDate === 'nomination_enddate'"
                  *ngIf="activeDate === 'nomination_enddate'">{{ programContext?.nomination_enddate | daysToGo  }}</em>
              </div>
            </div>
          </div>
          <div class="program-timeline-item">
            <div class="status" [class.active]="activeDate === 'shortlisting_enddate'">
              <div class="status__label">{{resourceService.frmelmnts.lbl.shortlistingNomination}}</div>
              <div class="status__date">
                {{ programContext?.shortlisting_enddate |  date:'LLLL d, yyyy'  }}
                <br />
                <em [class.sb-color-warning]="activeDate === 'shortlisting_enddate'"
                  *ngIf="activeDate === 'shortlisting_enddate'">{{ programContext?.shortlisting_enddate | daysToGo  }}</em>
              </div>
            </div>
          </div>
          <div class="program-timeline-item">
            <div class="status" [class.active]="activeDate === 'content_submission_enddate'">
              <div class="status__label">{{resourceService.frmelmnts.lbl.contributionReview}}</div>
              <div class="status__date">
                {{ programContext?.content_submission_enddate |  date:'LLLL d, yyyy'  }}
                <br />
                <em [class.sb-color-warning]="activeDate === 'content_submission_enddate'"
                  *ngIf="activeDate === 'content_submission_enddate'">{{ programContext?.content_submission_enddate | daysToGo  }}</em>
              </div>
            </div>
          </div>
          <div class="program-timeline-item">
            <div class="status" [class.active]="activeDate === 'enddate'">
              <div class="status__label">{{ resourceService.frmelmnts.lbl.programEndDate }}</div>
              <div class="status__date">
                {{ programContext?.enddate |  date:'LLLL d, yyyy'  }}
                <br />
                <em [class.sb-color-warning]="activeDate === 'enddate'"
                  *ngIf="activeDate === 'enddate'">{{ programContext?.enddate | daysToGo  }}</em>
              </div>
            </div>
          </div>
        </div>
      </ng-container>

      <div class="practical-sb-buttons" *ngIf="canNominate()">
        <div *ngIf="selectedCollectionIds.length === 0"> <button
            class="sb-btn sb-btn-disabled sb-btn-normal">{{resourceService.frmelmnts.btn.nominate}}</button></div>
        <div *ngIf="selectedCollectionIds.length > 0">
          <button class="sb-btn sb-btn-normal sb-btn-primary disabled {{selectedCollectionIds.length > 0 ? 'active' : 'disabled'}}"
            (click)="showContentTypeModal= true;">{{resourceService.frmelmnts.btn.nominate}}</button>
        </div>
      </div>
    </div>
  </div>

  <div class="sb-bg-color-white py-24 dynamicHeight">
    <div class="ui container m-0 p-0">
      <div class="sb-pageSection-header">
        <h4 class="sb-pageSection-title six">{{resourceService.frmelmnts.lbl.textbooks}} <span
            class="sb-pagSection-count sb-label sb-label-x sb-label-warning ml-8 px-8">{{collectionList.length || ''}}</span></h4>
      </div>
      <div class="sb-table-responsive">
        <table class="sb-table sb-table-striped sb-table-sortable sb-table-fixed">
          <thead class="sb-table-header sb-table-thead-gray">
            <tr>
              <th class="w-5">{{resourceService.frmelmnts.lbl.textbook}}<i class="fa fa-sort ml-4" aria-hidden="true"></i></th>
              <th class="w-5">{{resourceService.frmelmnts.lbl.profile.Medium}}<i class="fa fa-sort ml-4" aria-hidden="true"></i></th>
              <th class="w-5">{{resourceService.frmelmnts.lbl.class}}<i class="fa fa-sort ml-4" aria-hidden="true"></i></th>
              <th class="w-5">{{resourceService.frmelmnts.lbl.subject}}<i class="fa fa-sort ml-4" aria-hidden="true"></i></th>
              <th class="w-5">{{resourceService.frmelmnts.lbl.chapters}}<i class="fa fa-sort ml-4" aria-hidden="true"></i></th>
              <th class="w-5" *ngIf="currentNominationStatus === 'Initiated' || currentNominationStatus=== 'Pending'">Sample Content<i class="fa fa-sort ml-4" aria-hidden="true"></i></th>
              <th class="w-5"></th>
            </tr>
          </thead>
          <tbody class="sb-table-body" *ngIf="collectionList.length">
            <tr *ngFor="let data of collectionList">
              <td>
                <div class="sb__ellipsis sb__ellipsis--three sb-color-primary font-weight-bold">
                  {{data.name}}
                </div>
              </td>
              <td>
                <div suiPopup popupHeader="Grades" popupText="{{data.gradeLevel}}">{{data.gradeLevel}}</div>
              </td>
              <td>
                <div class="sb__ellipsis">{{data.medium}}</div>
              </td>
              <td>
                <div class="sb__ellipsis">{{data.subject}}</div>
              </td>
              <td>
                {{ data.chapterCount || 0 }}
              </td>
              <td *ngIf="currentNominationStatus === 'Initiated' || currentNominationStatus=== 'Pending'">{{data.sampleContentCount || 0 }}</td>
              <td>
                <div class="sb-checkbox sb-checkbox-primary d-inline-block">
                  <label></label>
                  <input  type="checkbox" *ngIf="(data.sampleContentCount === undefined || data.sampleContentCount === 0) && canNominate()" [checked]="data.isSelected || data.sampleContentCount" name="{{data.identifier}}" (click)="nominationChecked(data.identifier); toggleUploadSampleButton(data)">
               </div>
                  <button type="button" *ngIf="data.isSelected || data.sampleContentCount" (click)="uploadSampleContent($event, data)" class="sb-btn sb-btn-normal sb-btn-outline-primary mx-10 px-10">Upload Sample</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <div *ngIf="!objectKey(collectionList).length">
        <app-no-result [data]="{ messageText: 'resourceService.messages.stmsg.m0006'}"></app-no-result>
      </div>
    </div>
  </div>



  <div class="ui container pb-48 hidden hide">
    <div class="sb-pageSection-header row my-20">
      <h4 class="sb-pageSection-title six">{{programContext.name}}
        <ng-template #popupTemplate>
          <div class="content">
            <div class="textbook-details ml-8">
              <div class="header"><strong>{{resourceService.frmelmnts.lbl.subject}}</strong></div>
              <div class="content">
                <label class="d-block fsmall font-weight-normal mb-0">{{sharedContext.subject.join(', ')}}</label>
              </div>
              <hr />
              <div class="header"><strong>{{resourceService.frmelmnts.lbl.profile.Classes}}</strong></div>
              <div class="content">
                <label class="d-block fsmall font-weight-normal mb-0">{{sharedContext.gradeLevel.join(', ')}}</label>
              </div>
              <hr />
              <div class="header">
                <strong>{{resourceService.frmelmnts.lbl.nominationEndDate}}</strong>
              </div>
              <div class="content">
                <label class="d-block fsmall font-weight-normal mb-0">
                  {{programContext.nomination_enddate | date: medium }}
                </label>
              </div>
              <hr />
              <div class="header">
                <strong>{{resourceService.frmelmnts.lbl.nominationShortlistingDate}}</strong>
              </div>
              <div class="content">
                <label class="d-block fsmall font-weight-normal mb-0">
                  {{programContext.shortlisting_enddate | date: medium }}
                </label>
              </div>
              <hr />
              <div class="header">
                <strong>{{resourceService.frmelmnts.lbl.contributionEndDate}}</strong>
              </div>
              <div class="content">
                <label class="d-block fsmall font-weight-normal mb-0">
                  {{programContext.content_submission_enddate | date: medium }}
                </label>
              </div>
              <hr />
              <div class="header"><strong>{{resourceService.frmelmnts.lbl.programEndDate}}</strong></div>
              <div class="content">
                <label class="d-block fsmall font-weight-normal mb-0">
                  {{programContext.enddate | date: medium }}
                </label>
              </div>
            </div>
          </div>
        </ng-template>
        <i class="info circle link icon" suiPopup [popupTemplate]="popupTemplate">
        </i>
      </h4>
      <div class="pull-right">
        <div *ngIf="nominateButton === 'show'">
          <button
            class="sb-btn sb-btn-normal sb-btn-primary disabled {{nominateButton === 'show' ? 'active' : 'disabled'}}"
            (click)="showContentTypeModal= true;">{{resourceService.frmelmnts.btn.nominate}}</button>
        </div>
        <div class="two wide column column " *ngIf="nominateButton === 'hide'">
          <button class="sb-btn sb-btn-disabled sb-btn-normal">{{resourceService.frmelmnts.btn.nominate}}</button>
        </div>
      </div>
    </div>

    <table class="sb-table sb-table-striped sb-table-hover sb-table-sortable sb-table-fixed">
      <thead class="sb-table-header sb-table-thead-gray">
        <tr>
          <th>{{resourceService.frmelmnts.lbl.textbook}}<i class="fa fa-sort ml-4" aria-hidden="true"></i></th>
          <th>{{resourceService.frmelmnts.lbl.class}}<i class="fa fa-sort ml-4" aria-hidden="true"></i></th>
          <th>{{resourceService.frmelmnts.lbl.profile.Medium}}<i class="fa fa-sort ml-4" aria-hidden="true"></i></th>
          <th>{{resourceService.frmelmnts.lbl.chapters}}<i class="fa fa-sort ml-4" aria-hidden="true"></i></th>
          <th>{{resourceService.frmelmnts.lbl.subject}}<i class="fa fa-sort ml-4" aria-hidden="true"></i></th>
          <th class="text-center"></th>
        </tr>
      </thead>
      <tbody class="sb-table-body">
        <tr *ngFor="let data of collectionList">
          <td>
            <div class="sb__ellipsis sb__ellipsis--three sb-color-primary font-weight-bold">
              {{data.name}}
            </div>
          </td>
          <td>
            <div suiPopup popupHeader="Grades" popupText="{{data.gradeLevel}}">{{data.gradeLevel}}</div>
          </td>
          <td>
            <div class="sb__ellipsis">{{data.medium}}</div>
          </td>
          <td>
            {{ data.childNodes ? data.childNodes.length : 0 }}
          </td>
          <td>
            <div class="sb__ellipsis">{{data.subject}}</div>
          </td>
          <td class="text-center">
            <input type="checkbox" name="{{data.identifier}}" (click)="nominationChecked(data.identifier)">
          </td>
        </tr>
      </tbody>
    </table>
    <div *ngIf="!objectKey(collectionList).length">
      <app-no-result [data]="{ messageText: 'resourceService.messages.stmsg.m0006'}"></app-no-result>
    </div>
  </div>
</div>
<div *ngIf="currentStage !== 'collectionComponent'" style="margin-bottom: -60px;">
  <app-chapter-list [chapterListComponentInput]="chapterListComponentInput"
    (selectedQuestionTypeTopic)="selectedQuestionTypeTopic"></app-chapter-list>
</div>
<div class="twelve wide column" *ngIf="!showLoader && showError">
  <app-no-result [data]="{ messageText: 'resourceService.messages.fmsg.m0004'}"></app-no-result>
</div>
<div *ngIf='showLoader && !showError' class="ui container sb-chapter-list && currentStage === 'collectionComponent'">
  <app-loader></app-loader>
</div>

<sui-modal *ngIf="showContentTypeModal" [mustScroll]="true" [isClosable]="true" [transitionDuration]="0"
  [size]="'normal'" class="sb-modal" appBodyScroll (dismissed)="showContentTypeModal = false" #modal>
  <div class="sb-modal-header">
    {{resourceService.frmelmnts.lbl.submitNomination}}
   </div>
  <div class="sb-modal-content">
    <h5 class="font-weight-bold mb-10">{{resourceService.frmelmnts.lbl.listOfContentType}}</h5>
    <div class="mb-10" *ngFor="let contenttype of contentType">
      <div class="sb-checkbox sb-checkbox-primary">
        <input class="checking" [(ngModel)]="contenttype.isSelected" (change)="toggle(contenttype);"
          (click)="$event.stopPropagation()" type="checkbox">
        <label for="check1" class="mb-0"> {{contenttype}}</label>
      </div>
      <!-- <sui-checkbox name="{{contenttype.name}}" (click)="toggle($event, contenttype, contenttype.value);">{{contenttype.name}}</sui-checkbox> -->
    </div>
  </div>
  <div class="sb-modal-actions">
    <button type="button" class="sb-btn sb-btn-normal sb-btn-primary" (click)="addNomination()" [disabled]="!selectedContentTypes.length"> {{resourceService.frmelmnts.btn.submit}} </button>
    <button type="button" class="sb-btn sb-btn-normal sb-btn-outline-primary" (click)="showContentTypeModal = false"> {{resourceService.frmelmnts.btn.cancel}}
    </button>
  </div>
</sui-modal>
